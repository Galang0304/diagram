title Alur Proses Pengadaan Konstruksi Berbasis Blockchain
direction right

// Layer 1: Aktor (Abu-abu)
Aktor [color: gray, icon: users] {
  PA KPA [icon: briefcase, color: gray]
  PPK [icon: user-check, color: gray]
  ULP Pokja Pemilihan [icon: clipboard-list, color: gray]
  Konsultan Perencana [icon: pen-tool, color: gray]
  Penyedia Jasa Kontraktor [icon: hard-hat, color: gray]
  Konsultan Pengawas [icon: search, color: gray]
}

// Layer 2: Sistem Blockchain (Biru)
Sistem Blockchain [color: blue, icon: box] {
  Smart Contract [icon: file-code, color: blue]
  Blockchain Ledger [icon: link, color: blue]
  Event dan Mekanisme Validasi [icon: shield-check, color: blue]
}

// Layer 3: Output (Hijau)
Output [color: green, icon: check-square] {
  Pembayaran Termin [icon: dollar-sign, color: green]
  Status Kontrak [icon: clipboard-check, color: green]
  Audit Trail dan Transparansi [icon: activity, color: green]
}

// Proses Utama
Konsultan Perencana Menyusun Dokumen [icon: folder-plus, color: gray]
Data Dicatat ke Ledger [icon: save, color: blue]
ULP Pokja Melakukan Pemilihan [icon: list, color: gray]
Hasil Pemenang Dicatat ke Ledger [icon: award, color: blue]
PPK dan Penyedia Tanda Tangan Kontrak Digital [icon: edit-3, color: gray]
Smart Contract Dideploy [icon: upload-cloud, color: blue]
Penyedia Input Progres Berkala [icon: trending-up, color: gray]
Progres Tercatat Sebagai Event [icon: bell, color: blue]
Konsultan Pengawas Verifikasi Progres [icon: check-circle, color: gray]
Hasil Validasi Dicatat ke Ledger [icon: thumbs-up, color: blue]
Smart Contract Cek Progres Tervalidasi [icon: cpu, color: blue]
Pembayaran Termin Otomatis [icon: zap, color: green]
Serah Terima Pekerjaan PHO FHO [icon: package, color: gray]
Status Kontrak Selesai [icon: flag, color: green]
Data Permanen di Blockchain [icon: lock, color: blue]

// Proses Addendum (Perubahan Kontrak)
Addendum Kontrak? [shape: diamond, color: blue, icon: git-branch]
PPK Memperbarui Kontrak [icon: refresh-cw, color: gray]
Smart Contract Versi Baru [icon: git-commit, color: blue]
Riwayat Versi Tersimpan [icon: archive, color: blue]

// Relasi Alur Proses
Konsultan Perencana > Konsultan Perencana Menyusun Dokumen
Konsultan Perencana Menyusun Dokumen > Data Dicatat ke Ledger
Data Dicatat ke Ledger > Blockchain Ledger

ULP Pokja Pemilihan > ULP Pokja Melakukan Pemilihan
ULP Pokja Melakukan Pemilihan > Hasil Pemenang Dicatat ke Ledger
Hasil Pemenang Dicatat ke Ledger > Blockchain Ledger

PPK > PPK dan Penyedia Tanda Tangan Kontrak Digital
Penyedia Jasa Kontraktor > PPK dan Penyedia Tanda Tangan Kontrak Digital
PPK dan Penyedia Tanda Tangan Kontrak Digital > Smart Contract Dideploy
Smart Contract Dideploy > Smart Contract

Penyedia Jasa Kontraktor > Penyedia Input Progres Berkala
Penyedia Input Progres Berkala > Progres Tercatat Sebagai Event

Konsultan Pengawas > Konsultan Pengawas Verifikasi Progres
Konsultan Pengawas Verifikasi Progres > Hasil Validasi Dicatat ke Ledger
Hasil Validasi Dicatat ke Ledger > Blockchain Ledger

Event dan Mekanisme Validasi > Smart Contract Cek Progres Tervalidasi
Smart Contract Cek Progres Tervalidasi > Pembayaran Termin Otomatis
Pembayaran Termin Otomatis > Pembayaran Termin

// Loop Progres & Verifikasi
Pembayaran Termin Otomatis > Penyedia Input Progres Berkala

// Addendum Branch
Smart Contract Dideploy > Addendum Kontrak?
Addendum Kontrak? > PPK Memperbarui Kontrak: Ya
PPK Memperbarui Kontrak > Smart Contract Versi Baru
Smart Contract Versi Baru > Smart Contract
Smart Contract Versi Baru > Riwayat Versi Tersimpan
Riwayat Versi Tersimpan > Blockchain Ledger
Addendum Kontrak? > Penyedia Input Progres Berkala: Tidak

// Penyelesaian Kontrak
Penyedia Input Progres Berkala > Serah Terima Pekerjaan PHO FHO
Serah Terima Pekerjaan PHO FHO > Status Kontrak Selesai
Status Kontrak Selesai > Data Permanen di Blockchain
Data Permanen di Blockchain > Status Kontrak
Data Permanen di Blockchain > Audit Trail dan Transparansi

// Output
Pembayaran Termin > Audit Trail dan Transparansi
Status Kontrak > Audit Trail dan Transparansi
Event dan Mekanisme Validasi < Progres Tercatat Sebagai Event